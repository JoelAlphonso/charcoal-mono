{{!--
Tinymce Property Input
======================

`charcoal/admin/property/input/tinymce`

--}}

<textarea
    id="{{inputId}}"
    name="{{inputName}}"
    class="form-control {{inputClass}}"
    cols="{{cols}}"
    rows="{{rows}}"
    {{#readOnly}}readonly{{/readOnly}}
    {{#required}}required{{/required}}
    {{#disabled}}disabled{{/disabled}}
>{{&inputVal}}</textarea>

{{#addJs}}
<script src="{{baseUrl}}assets/admin/scripts/vendors/tinymce/tinymce.min.js"></script>
<script>

var elFinderCallback = elFinderCallback ? elFinderCallback : {};

elFinderCallback['{{inputId}}'] = function (file, elf)
{
    // pass selected file data to TinyMCE
    parent.tinyMCE.activeEditor.windowManager.getParams().oninsert(file, elf);
    // close popup window
    parent.tinyMCE.activeEditor.windowManager.close();
};

Charcoal.Admin.manager().add_property_input({
    id: '{{inputId}}',
    input_id: '{{inputId}}',
    type: 'charcoal/admin/property/input/tinymce',
    data: {
        editor_options: {{&editorOptionsJson}}
    }
});
</script>
{{/addJs}}
