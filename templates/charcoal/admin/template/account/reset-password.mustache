{{!--
Lost password template
======================

This template, which obviously does not require authentication, displays a form to enter
a username (or email) to send a link

See the `\Charcoal\Admin\Action\LostPasswordAction` class for details on what happens next.

--}}
{{>charcoal/admin/template/inc.header}}

<div class="o-background -fixed u-background-lightblue" {{#backgroundImage}}style="background-image:url({{backgroundImage}});"{{/backgroundImage}}>
    {{#backgroundVideo}}
    <video class="embedded-video horizontal" muted="" preload="auto" autoplay loop>
      <source src="{{backgroundVideo}}" type="video/mp4">
    </video>
    {{/backgroundVideo}}
</div>

<div class="c-login">
    <div class="c-login_panel" style="width:390px;">
        <div class="c-login_header">
            <div class="c-login_avatar">
                <img class="c-login_avatar_image" src="{{baseUrl}}assets/admin/images/avatar.jpg">
            </div>
        </div>

        {{>charcoal/admin/widget/feedbacks}}

        <div class="text-center">
            <h2>{{#_t}}Reset your password{{/_t}}</h2>

            <p>{{#_t}}Enter the token you have received in your email below, your username or email and your new password.{{/_t}}</p>

            <form method="post" action="{{urlResetPasswordAction}}">
                <input type="hidden" name="csrf_token" value="{{csrfToken}}">
                <div class="form-group">
                    <label class="sr-only" for="token">{{#_t}}Lost password token{{/_t}}</label>
                    <div class="input-group">
                        <label class="input-group-addon" for="token"><i class="fa fa-ticket fa-fw"></i></label>
                        <input class="form-control" type="text" name="token" id="token" placeholder="{{#_t}}Token (received by email){{/_t}}" required {{#lostPasswordToken}}readonly{{/lostPasswordToken}} value="{{lostPasswordToken}}">
                    </div>
                    <small><a href="{{urlLostPassword}}">{{#_t}}Retrieve a reset password token by email{{/_t}}</a></small>
                </div>

                <div class="form-group">
                    <label class="sr-only" for="username">{{#_t}}Username or email{{/_t}}</label>
                    <div class="input-group">
                        <label class="input-group-addon" for="username"><i class="fa fa-user fa-fw"></i></label>
                        <input class="form-control" type="text" name="username" id="username" placeholder="{{#_t}}Username or email{{/_t}}" required autofocus>
                    </div>
                </div>

                <div class="form-group">
                    <label class="sr-only" for="password">{{#_t}}New password{{/_t}}</label>
                    <div class="input-group">
                        <label class="input-group-addon" for="password"><i class="fa fa-key fa-fw"></i></label>
                        <input class="form-control" type="password" name="password" id="password" placeholder="{{#_t}}New password{{/_t}}" required>
                    </div>
                </div>

                <div class="form-group">
                    <label class="sr-only" for="password-confirm">{{#_t}}Confirm new password{{/_t}}</label>
                    <div class="input-group">
                        <label class="input-group-addon" for="password-confirm"><i class="fa fa-key fa-fw"></i></label>
                        <input class="form-control" type="password" name="password_confirm" id="password-confirm" placeholder="{{#_t}}Confirm new password{{/_t}}" required>
                    </div>
                </div>

                <div style="margin:1rem 0 1rem 0;">
                    <div class="g-recaptcha" data-sitekey="{{recaptchaKey}}"></div>
                </div>

                <div class="form-group">
                    <button class="btn btn-info btn-lg btn-block js-reset-password-submit" name="login" type="submit">{{#_t}}Send reset password link{{/_t}}</button>
                </div>

            </form>
        </div>
    </div>
</div>

{{#addJsRequirement}}
<script src='https://www.google.com/recaptcha/api.js'></script>
{{/addJsRequirement}}


{{#addJs}}
<script>
var resetPasswordTemplate;
$(document).ready(function() {
    resetPaswordTemplate = new Charcoal.Admin.Template_Account_ResetPassword({

    });
    //Charcoal.Admin.register_template(lostPasswordTemplate);
});
</script>
{{/addJs}}

{{>charcoal/admin/template/inc.footer}}
