{{!--
    Select Options Property Input
    =============================

    `charcoal/admin/property/input/select`
--}}

{{# inputGroup }}
    <div class="input-group input-group-lg">
{{/ inputGroup }}
{{# isObject }}
    {{> charcoal/admin/property/control/select }}
{{/ isObject }}
{{^ isObject }}
        <input
            type="text"
            id="{{ inputId }}"
            name="{{ inputName }}"
            class="form-control {{ inputClass }}"
            value="{{ inputVal }}"
            {{# placeholder }}placeholder="{{ . }}"{{/ placeholder }}
            {{# readOnly }}readonly{{/ readOnly }}
            {{# required }}required{{/ required }}
            {{# disabled }}disabled{{/ disabled }}
        >
{{/ isObject }}

{{# inputGroup }}
        <span class="input-group-btn">
    {{# allowClipboardCopy }}
        <button id="{{ inputId }}_copy" class="btn btn-lg btn-default" type="button"
                data-clipboard-target="#{{ inputId }}">
            <span class="glyphicon glyphicon-copy" aria-hidden="true"></span>
            <span class="btn-label sr-only">{{# _t }}Copy To Clipboard{{/ _t }}</span>
        </button>
    {{/ allowClipboardCopy }}
            {{# allowUpdate }}
                <button id="{{ inputId }}_update" class="btn btn-info" type="button"
                        data-update-target="#{{ inputId }}">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            <span class="btn-label sr-only">{{# _t }}Update selected item{{/ _t }}</span>
        </button>
            {{/ allowUpdate }}
    </span>
    </div>
{{/ inputGroup }}

{{# addJs }}
    <script>
        Charcoal.Admin.manager().add_property_input({
            id  : '{{ inputId }}',
            type: 'charcoal/admin/property/input/selectize',
            data: {
                title                 : '{{ label }}',
                translations          : {
                    statusTemplate: '{{#_t}}Step [[ current ]] of [[ total ]]{{/_t}}'
                },
                {{# property.objType }}
                    pattern           : '{{ pattern }}',
                    obj_type          : '{{ . }}',
                {{/ property.objType }}
                {{# multiple }}
                    multiple          : true,
                    multiple_separator: '{{ property.multipleSeparator }}',
                {{/ multiple }}
                {{# allowClipboardCopy }}
                    copy_items        : true,
                {{/ allowClipboardCopy }}
                {{# allowUpdate }}
                    allow_update      : true,
                {{/ allowUpdate }}
                selectize_selector    : '#{{ inputId }}',
                form_ident            : {{& formIdentAsJson}},
                selectize_options     : {{& selectizeOptionsAsJson }},
                choice_obj_map        : {{& choiceObjMapAsJson }},
                selectize_property_ident : '{{& property.ident }}',
                selectize_obj_type       : '{{& objType }}',
                selectize_templates   : {{& selectizeTemplatesAsJson }}
            }
        });
    </script>
{{/ addJs }}
