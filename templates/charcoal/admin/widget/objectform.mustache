{{!--
Object Form Widget
===========

`charcoal/admin/widget/form`

This widget expects to be in a context (model) of type `Charcoal\Admin\Widget\Form`.

--}}

<form action="{{admin_url}}{{action}}" method="{{method}}" enctype="multipart/form-data" id="{{widget_id}}">

    <div class="o-flex">

        <div class="o-flex_main">

            {{!-- Loop all form groups --}}
            {{#groups}}
                {{>$widget_template}}
            {{/groups}}

        </div>

        {{!-- Get the FormSidebarWidget object --}}
        {{#sidebars}}
            {{>charcoal/admin/widget/form.sidebar}}
        {{/sidebars}}

        <input type="hidden" name="widget_id" value="{{widget_id}}">
        <input type="hidden" name="obj_type" value="{{obj_type}}">
        <input type="hidden" name="obj_id" value="{{obj_id}}">

    </div>
</form>

{{#add_js}}
<script>
Charcoal.Admin.manager().add_widget({
    id: '{{widget_id}}',
    type: 'charcoal/admin/widget/form',
    data: {
        form_selector: '#{{widget_id}}',
        obj_type: '{{obj_type}}',
        obj_id: '{{obj_id}}'
    }
});
</script>
{{/add_js}}
