{{!--

    Header Menu Widget
    ==================

--}}

<div class="c-nav-container o-flex_aside">
    <button class="c-nav-container_button js-toggle-class" type="button" data-target="body" data-class="has-nav-open">
        <span class="c-nav-container_button_icon"></span>
    </button>
    <div class="c-nav-container_header">
        <a class="c-nav-container_logo" href="{{adminUrl}}">
            <svg role="img"><use xlink:href="{{baseUrl}}assets/admin/images/svgs.svg#charcoal-logo"></use></svg>
        </a>
        {{# isAuthenticated }}
            {{# showSystemMenu }}
                <nav class="btn-group c-nav-system">
                    <button type="button" class="btn dropdown-toggle c-nav-system_button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <svg role="img"><use xlink:href="{{baseUrl}}assets/admin/images/svgs.svg#icon-kebab"></use></svg>
                        <span class="sr-only">{{# _t }}Settings{{/ _t }}</span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-right c-nav-system_list">
                        {{# systemMenu }}
                        <li class="dropdown-item c-nav-system_item">
                            <a
                                href="{{ url }}"
                                class="c-nav-system_link{{# ident }} -{{ . }}{{/ ident }}"
                                {{# id }}
                                id="{{ . }}"
                                {{/ id }}
                                {{# iconCss }}
                                data-icon="{{ . }}"
                                {{/ iconCss }}>
                                <span>{{ label }}</span>
                            </a>
                        </li>
                        {{/ systemMenu }}
                    </ul>
                </nav>
            {{/ showSystemMenu }}
            {{^ showSystemMenu }}
                <a href="{{adminUrl}}logout" class="c-nav-system_logout btn">
                    <i class="fa fa-lg fa-sign-out" aria-hidden="true">&nbsp;</i>
                    <span class="btn-label">{{# _t }}Log Out{{/ _t }}</span>
                </a>
            {{/ showSystemMenu }}
        {{/ isAuthenticated }}
    </div>
    {{# showHeaderMenu }}
    <div class="c-nav-main_overlay -light js-toggle-class" data-target="body" data-class="has-nav-open"></div>
    <nav class="c-nav-main">
        <ul class="c-nav-main_list">
            {{# headerMenu }}
               <li class="c-nav-main_item{{# ident }} -{{ . }}{{/ ident }}">
                   <a class="c-nav-main_link{{# selected }} is-active{{/ selected }}" href="{{ url }}">
                       <span class="c-nav-main_link_wrap">
                           {{# svg }}
                           <svg class="c-nav-main_link_icon" role="img"><use xlink:href="{{ . }}"></use></svg>
                           {{/ svg }}
                           {{# icon }}
                           <img class="c-nav-main_link_icon" src="{{ . }}">
                           {{/ icon }}
                           {{# iconCss }}
                           <i class="{{ . }}" aria-hidden="true"></i>
                           {{/ iconCss }}
                           {{# label }}
                           <span class="c-nav-main_link_text{{^ show_label }} sr-only{{/ show_label }}">{{ . }}</span>
                           {{/ label }}
                       </span>
                   </a>
               </li>
           {{/ headerMenu }}
        </ul>
    </nav>
    {{/ showHeaderMenu }}

    {{# showSidemenu }}
        {{# sidemenu }}
            {{> charcoal/admin/widget/sidemenu }}
        {{/ sidemenu }}
    {{/ showSidemenu }}
</div>

{{#addJs}}
<script>
    $(function() {
        var headerMenu_template = new Charcoal.Admin.Template_MenuHeader();

        $('#btn-clear-cache').on('click.charcoal.cache', function (event) {
            event.preventDefault();
            event.cacheType = 'global';

            Charcoal.Admin.cache().onPurge(event);
        });
    });
</script>
{{/addJs}}
